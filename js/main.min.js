const buttons=document.querySelectorAll(".button"),input=document.querySelector(".app__input-field"),body=document.querySelector("body"),selects=document.querySelectorAll(".select");let output=document.querySelector(".app__output-value"),currentDate=(new Date).toLocaleDateString();async function getCourse(){let e=document.querySelectorAll(".select")[0].value,t=document.querySelectorAll(".select")[1].value,n="USD"===t?"$":"UAH"===t?"₴":"IDR"===t?"₹":"€";console.log("From: ",e),console.log("To: ",t);let o=`${e} to ${t}`;console.log("Item name: ",o);let u;if(sessionStorage.getItem(o)){u=+sessionStorage.getItem(o);let e=Math.round(input.value*u*1e3)/1e3;output.innerHTML=`${e} ${n}`}else fetch(`https://currency-exchange.p.rapidapi.com/exchange?from=${e}&to=${t}&q=1.0`,{method:"GET",headers:{"X-RapidAPI-Key":"ff7552500dmshede3f1b3edbacd8p1ed3f3jsn5ca1b30e526c","X-RapidAPI-Host":"currency-exchange.p.rapidapi.com"}}).then((e=>e.json())).then((e=>{sessionStorage.setItem(o,e),console.log(e);let t=Math.round(input.value*e*1e3)/1e3;console.log(t),output.innerHTML=`${t} ${n}`})).catch((e=>console.error(e)))}function setState(e,t){input.classList.contains("focused")&&(e>=1&&e<=9&&"active"===t?buttons[e-1].classList.add("active"):0==e&&"active"===t?buttons[9].classList.add("active"):e>=1&&e<=9&&"default"===t?buttons[e-1].classList.remove("active"):0==e&&"default"===t&&buttons[9].classList.remove("active"))}function setResetState(){"0"==input.value?document.querySelector(".reset").setAttribute("disabled",!0):"0"!=input.value[0]&&input.value.length>0&&document.querySelector(".reset").removeAttribute("disabled")}function removeOrAddZero(){"0"===input.value[0]&&input.value.length>1?input.value=input.value.slice(1):0===input.value.length&&(input.value="0")}document.querySelector(".app__output").dataset.day=`Курс станом на ${currentDate}`,buttons.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault(),e.classList.contains("reset")?e.classList.contains("reset")&&(input.value="0",getCourse(),setResetState()):(input.value+=this.innerText,getCourse(),removeOrAddZero(),setResetState(),console.log(input.value))}))})),window.addEventListener("keydown",(function(e){setState(Number(e.key),"active")})),window.addEventListener("keyup",(function(e){setState(Number(e.key),"default")})),input.addEventListener("input",(()=>{getCourse(),removeOrAddZero(),setResetState()})),selects.forEach((e=>{e.addEventListener("input",(()=>{getCourse()}))})),window.addEventListener("load",(()=>{setResetState()})),input.onfocus=function(){input.classList.add("focused")},input.onblur=function(){input.classList.remove("focused")};