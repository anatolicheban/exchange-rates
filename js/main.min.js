const buttons=document.querySelectorAll(".button"),input=document.querySelector(".app__input-field"),body=document.querySelector("body"),selects=document.querySelectorAll(".select");let output=document.querySelector(".app__output-value"),currentDate=(new Date).toLocaleDateString();async function getCourse(){let e=document.querySelectorAll(".select")[0].value,t=document.querySelectorAll(".select")[1].value,o="USD"===t?"$":"UAH"===t?"₴":"€";console.log("From: ",e),console.log("To: ",t);let n=`${e} to ${t}`;console.log("Item name: ",n);let s;if(sessionStorage.getItem(n)){s=+sessionStorage.getItem(n);let e=Math.round(input.value*s*1e3)/1e3;output.innerHTML=`${e} ${o}`}else fetch(`https://currency-exchange.p.rapidapi.com/exchange?from=${e}&to=${t}&q=1.0`,{method:"GET",headers:{"X-RapidAPI-Key":"ff7552500dmshede3f1b3edbacd8p1ed3f3jsn5ca1b30e526c","X-RapidAPI-Host":"currency-exchange.p.rapidapi.com"}}).then((e=>e.json())).then((e=>{sessionStorage.setItem(n,e),console.log(e);let t=Math.round(input.value*e*1e3)/1e3;console.log(t),output.innerHTML=`${t} ${o}`})).catch((e=>console.error(e)))}function setState(e,t){e>=1&&e<=9&&"active"===t?buttons[e-1].classList.add("active"):0==e&&"active"===t?buttons[9].classList.add("active"):e>=1&&e<=9&&"default"===t?buttons[e-1].classList.remove("active"):0==e&&"default"===t&&buttons[9].classList.remove("active")}document.querySelector(".app__output").dataset.day=`Курс станом на ${currentDate}`,buttons.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault(),e.classList.contains("reset")?e.classList.contains("reset")&&(input.value="0",getCourse()):(input.value+=this.innerText,getCourse(),console.log(input.value))}))})),window.addEventListener("keydown",(function(e){setState(Number(e.key),"active")})),window.addEventListener("keyup",(function(e){setState(Number(e.key),"default")})),input.oninput=getCourse,selects.forEach((e=>{e.addEventListener("input",(()=>{getCourse()}))}));